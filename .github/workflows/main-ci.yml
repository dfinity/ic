name: Main CI

on:
  # Todo: re-enable once github runner resources have been set
  # push:
  merge_group:
  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:
  pull_request:

jobs:
  test-evm-rpc:
    name: Test (EVM RPC)
    runs-on:
      group: IC-Prod
    timeout-minutes: 80
    container:
      image: dfinity/ic-build:c09c09c9b48ca3ad09407c1cc8fa3e9483954ee046c64d23410d88b23f95e2f3
    if: ${{ vars.RUN_CI == 'true' }}
    steps:
      - name: Checkout
        uses: actions/checkout@v3
      - name: Build Rust package
        run: cargo build --package ic-cketh-minter
