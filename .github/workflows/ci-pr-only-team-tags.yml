name: Tag Team Reviewers

on:
  pull_request:
    types:
      - ready_for_review
      - synchronize

env:
  PR_NUMBER: "${{ github.event.pull_request.number }}"

jobs:
  set-team-tags:
    name: Set Team Tags
    # if: ${{ github.event.pull_request.draft == false }}
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Get Requested Reviewers
        id: requested_reviewers
        run: |
          TEAMS=$(gh pr view $PR_NUMBER --json reviewRequests --jq '.reviewRequests[].name' | tr '\n' ' ')
          echo "requested_teams=$TEAMS" >> $GITHUB_ENV
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
