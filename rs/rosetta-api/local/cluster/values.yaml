# Number of replicas for each deployment
replicaCount: 1

# Use persistent volumes for /data partition
usePersistentVolumes: false

# Volume configuration
volumeMounts:
  - name: data-volume
    mountPath: /data

volumes:
  - name: data-volume

# PersistentVolumeClaim configuration (used when usePersistentVolumes is true)
persistentVolume:
  storageClass: "standard"
  accessModes:
    - ReadWriteOnce
  size: 50Gi

commonResources: &commonResources
  limits:
    memory: "1024Mi"
    cpu: "5"
  requests:
    memory: "512Mi"
    cpu: "500m"

replicaCount: 1

volumes:
  - name: data

volumeMounts:
  - name: data
    mountPath: /data

icrcConfig:
  networkType: mainnet
  # Comma-separated list of ledger IDs for multi-token support (e.g., "ledger1,ledger2")
  ledgerId: vtrom-gqaaa-aaaaq-aabia-cai
  storeFile: /data/db.sqlite
  useLocallyBuilt: false
  # Deploy the latest ICRC Rosetta image from Docker Hub
  deployLatest: true
  # Flush the database cache and shrink the memory after updating account balances
  flushCacheShrinkMem: false

icpConfig:
  storeLocation: /data
  tokenSymbol: ICP
  canisterId: xafvr-biaaa-aaaai-aql5q-cai
  useLocallyBuilt: false
  # Deploy the latest ICP Rosetta image from Docker Hub
  deployLatest: true

baseService: &baseService
  namespace: "rosetta-api"
  containerPort: 3000
  resources: *commonResources

icrcRosettaServices:
  - <<: *baseService
    name: icrc-rosetta-latest
    image: dfinity/ic-icrc-rosetta-api:latest
    nodePort: 30085
    isLocallyBuilt: false

  - <<: *baseService
    name: icrc-rosetta-local
    image: icrc-rosetta:local
    nodePort: 30086
    isLocallyBuilt: true

icpRosettaServices:
  - <<: *baseService
    name: icp-rosetta-latest
    image: dfinity/rosetta-api:latest
    nodePort: 30087
    isLocallyBuilt: false

  - <<: *baseService
    name: icp-rosetta-local
    image: icp-rosetta:local
    nodePort: 30088
    isLocallyBuilt: true

cadvisor:
  image:
    repository: gcr.io/cadvisor/cadvisor
    tag: latest
    pullPolicy: IfNotPresent

  resources:
    limits:
      memory: "512Mi"
      cpu: "1"
    requests:
      memory: "256Mi"
      cpu: "500m"

  service:
    type: ClusterIP
    port: 8080

  nodeSelector: {}
  tolerations: []
  affinity: {}
