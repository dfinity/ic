[package]
name = "ic-canister-sandbox-backend-lib"
version.workspace = true
authors.workspace = true
edition.workspace = true
description.workspace = true
documentation.workspace = true

[build-dependencies]
cc = { workspace = true }

[dependencies]
ic-interfaces = { workspace = true }
bincode = { workspace = true }
bytes = { workspace = true }
ic-base-types = { workspace = true }
ic-config = { workspace = true }
ic-limits = { workspace = true }
ic-cycles-account-manager = { workspace = true }
ic-embedders = { workspace = true }
ic-interfaces-state-manager = { workspace = true }
ic-logger = { workspace = true }
ic-metrics = { workspace = true }
ic-replicated-state = { workspace = true }
ic-registry-subnet-type = { workspace = true }
ic-sys = { workspace = true }
ic-system-api = { workspace = true }
ic-types = { workspace = true }
ic-utils = { path = "../utils" }
ic-wasm-types = { workspace = true }
lazy_static = { workspace = true }
libc = { workspace = true }
libflate = { workspace = true }
memory_tracker = { workspace = true }
nix = { workspace = true }
num-traits = { workspace = true }
once_cell = { workspace = true }
prometheus = { workspace = true }
rayon = { workspace = true }
regex = { workspace = true }
serde = { workspace = true }
serde_bytes = { workspace = true }
serde_json = { workspace = true }
slog = { workspace = true }
threadpool = { workspace = true }
which = "4.2.2"

[dev-dependencies]
ic-management-canister-types-private = { workspace = true }
ic-registry-routing-table = { workspace = true }
ic-test-utilities = { workspace = true }
# This makes the dependencies of the binary more consistent
# with the dependencies of execution environment tests and
# allows the binary to reuse most of the build artifacts
# produced by `cargo test`.
ic-test-utilities-types = { workspace = true }
mockall = { workspace = true }
rand = { workspace = true }
slog-async = { workspace = true }
slog-term = { workspace = true }
tempfile = { workspace = true }
wat = { workspace = true }

[features]
sigsegv_handler_checksum = ["memory_tracker/sigsegv_handler_checksum"]

[[bin]]
name = "canister_sandbox"
path = "bin/canister_sandbox.rs"

[[bin]]
name = "compiler_sandbox"
path = "bin/compiler.rs"

[[bin]]
name = "sandbox_launcher"
path = "bin/sandbox_launcher.rs"

[[bin]]
name = "test_controller"
path = "bin/test_controller.rs"

[[bin]]
name = "test_sandbox"
path = "bin/test_sandbox.rs"
