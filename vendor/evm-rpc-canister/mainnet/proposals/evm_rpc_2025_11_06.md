# Proposal to upgrade the EVM RPC canister

Repository: `https://github.com/dfinity/evm-rpc-canister.git`

Git hash: `32c067d3b19ccc91e3abd991f9c6c2204466021a`

New compressed Wasm hash: `c5517f9d69864f3ad285b8aa77c5af515a2caf7241b8765960e6259d2964e9f7`

Upgrade args hash: `6005397a2ddf2ee644ceaca123c9afbd2360f0644e7e5e6c4ac320a5f7bd4a82`

Target canister: `7hfb6-caaaa-aaaar-qadga-cai`

Previous EVM RPC proposal: https://dashboard.internetcomputer.org/proposal/139081

---

## Motivation

Upgrade the EVM RPC canister to the latest version [v2.7.0](https://github.com/dfinity/evm-rpc-canister/releases/tag/evm_rpc-v2.7.0),
which includes in particular the following changes:
* For each `eth_*` endpoint, add a new corresponding `eth_*CyclesCost` query endpoint with the same Candid arguments, that allows computing the cycles cost of calling the corresponding `eth_*` update endpoint.
* Use constant-size JSON-RPC request IDs for consistent request cost calculations.

See the Gihub release [v2.7.0](https://github.com/dfinity/evm-rpc-canister/releases/tag/evm_rpc-v2.7.0) for more details.

## Release Notes

```
git log --format='%C(auto) %h %s' 67e78a627254a82abc729000ba75fe4f9f15b8b5..32c067d3b19ccc91e3abd991f9c6c2204466021a --
32c067d chore: release (#504)
c08ec55 feat: add cycles cost endpoints (#509)
0f273f6 docs: use `sol!` macro in `eth_call` example (#515)
fd431be refactor: prepare to add `RequestCost` endpoints (#508)
4d17b8d chore: use `ConstantSizeId` request IDs (#514)
8e25e74 feat: add retry strategy to client (#512)
d96aa03 test: setup wallet canister for integration tests (#513)
0bc79e9 docs: hide imports in Rust doc (#511)
86c7bdd docs: expand `evm_rpc_client` README (#510)
ffd56b4 chore: proposal to upgrade to v2.6.0 (#507)
6d0fcd6 fix: `evm_rpc` package name in publish pipeline (#506)
1425d42 fix: `CHANGELOG` path in publish pipeline (#505)
05fbd69 fix: `cliff.toml` repository URL (#501)
ae90b56 fix: specify `evm_rpc_types` version for `evm_rpc_client` (#503)
3e57c14 fix: canister artifacts names in publish pipeline (#502)
 ```

## Upgrade args

```
git fetch
git checkout 32c067d3b19ccc91e3abd991f9c6c2204466021a
didc encode -d candid/evm_rpc.did -t '(InstallArgs)' '(record {})' | xxd -r -p | sha256sum
```

## Wasm Verification

Verify that the hash of the gzipped WASM matches the proposed hash.

```
git fetch
git checkout 32c067d3b19ccc91e3abd991f9c6c2204466021a
"./scripts/docker-build"
sha256sum ./evm_rpc.wasm.gz
```