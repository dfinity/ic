{
  "annotations": {
    "list": [
      {
        "builtIn": 1,
        "datasource": {
          "type": "datasource",
          "uid": "grafana"
        },
        "enable": true,
        "hide": true,
        "iconColor": "rgba(0, 211, 255, 1)",
        "name": "Annotations & Alerts",
        "target": {
          "limit": 100,
          "matchAny": false,
          "tags": [],
          "type": "dashboard"
        },
        "type": "dashboard"
      }
    ]
  },
  "description": "Subnet load, by component",
  "editable": true,
  "fiscalYearStartMonth": 0,
  "graphTooltip": 1,
  "id": 156,
  "links": [
    {
      "asDropdown": true,
      "icon": "external link",
      "includeVars": true,
      "keepTime": true,
      "tags": [
        "production"
      ],
      "targetBlank": true,
      "type": "dashboards"
    }
  ],
  "panels": [
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${datasource}"
      },
      "description": "End-to-end ingress message latency, from block maker to certification, averaged over the selected time range:\n\n* *Artifact pool*: mean time before the message makes it into a block, estimated as the time required to consume the ingress + XNet artifact pools (given block size limit and block rate).\n* *Consensus*: interval at which batches are delivered to Message Routing.\n* *Induction*: block queuing time between Consensus and Message Routing; difference between measured duration from block making to induction and *Consensus* above.\n* *Ingress queue*: mean time spent by messages in the ingress queue of the average (i.e. median) canister.\n* *Processing*: DSM round duration.\n* *Certification*: time to certify the state root hash; difference between execution (max resident) height and certification (last certified) height, times DSM round duration.",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisBorderShow": false,
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "fillOpacity": 60,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "lineWidth": 0,
            "scaleDistribution": {
              "type": "linear"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": []
          },
          "unit": "s"
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "Sync calls"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "blue",
                  "mode": "fixed"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Certification"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "semi-dark-green",
                  "mode": "fixed"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Processing"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "semi-dark-orange",
                  "mode": "fixed"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Ingress queue"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "light-orange",
                  "mode": "fixed"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Induction"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "yellow",
                  "mode": "fixed"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Consensus"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "green",
                  "mode": "fixed"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Artifact pool"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "purple",
                  "mode": "fixed"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Total"
            },
            "properties": [
              {
                "id": "custom.hideFrom",
                "value": {
                  "legend": true,
                  "tooltip": false,
                  "viz": true
                }
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 16,
        "w": 12,
        "x": 0,
        "y": 0
      },
      "id": 45,
      "options": {
        "barRadius": 0,
        "barWidth": 0.9,
        "fullHighlight": false,
        "groupWidth": 0.7,
        "legend": {
          "calcs": [],
          "displayMode": "list",
          "placement": "bottom",
          "showLegend": true
        },
        "orientation": "horizontal",
        "showValue": "never",
        "stacking": "normal",
        "tooltip": {
          "mode": "multi",
          "sort": "none"
        },
        "xTickLabelRotation": 0,
        "xTickLabelSpacing": 0
      },
      "pluginVersion": "11.3.0",
      "targets": [
        {
          "editorMode": "code",
          "exemplar": false,
          "expr": "label_replace(\nlabel_replace(\n    quantile without(ic_node, instance) (\n        0.5,\n            clamp_min(\n                (\n                        avg_over_time(xnet_pool_size_bytes{job=\"replica\",ic=\"$ic\",ic_subnet=~\"$ic_subnet\"}[$__range])\n                    + on(instance) group_left\n                        avg_over_time(artifact_pool_artifact_bytes{job=\"replica\",ic=\"$ic\",ic_subnet=~\"$ic_subnet\",pool=\"ingress\",pool_type=\"validated\"}[$__range])\n                    or # Ingress pool metrics are not populated with no ingress messages.\n                        avg_over_time(xnet_pool_size_bytes{job=\"replica\",ic=\"$ic\",ic_subnet=~\"$ic_subnet\"}[$__range])\n                )\n                / (4 * 2^20)\n                - 1,\n                0\n            )\n        /\n            rate(mr_process_batch_duration_seconds_count{job=\"replica\",ic=\"$ic\",ic_subnet=~\"$ic_subnet\"}[$__range])\n    ),\n    \"ic_subnet\", \"$1\", \"ic_subnet\", \"([a-z0-9]+)-.*\"),\n    \"step\", \"Artifact pool\", \"ic_subnet\", \".*\"\n)",
          "hide": false,
          "instant": true,
          "interval": "",
          "legendFormat": "Artifact pool {{ic_subnet}}",
          "range": false,
          "refId": "A"
        },
        {
          "editorMode": "code",
          "exemplar": false,
          "expr": "label_replace(\nlabel_replace(\n    quantile without(ic_node, instance) (\n        0.5,\n            rate(consensus_batch_delivery_interval_seconds_sum{job=\"replica\",ic=\"$ic\",ic_subnet=~\"$ic_subnet\"}[$__range])\n        /\n            rate(consensus_batch_delivery_interval_seconds_count{job=\"replica\",ic=\"$ic\",ic_subnet=~\"$ic_subnet\"}[$__range])\n    ),\n    \"ic_subnet\", \"$1\", \"ic_subnet\", \"([a-z0-9]+)-.*\"),\n    \"step\", \"Consensus\", \"ic_subnet\", \".*\"\n)",
          "hide": false,
          "instant": true,
          "interval": "",
          "legendFormat": "__auto",
          "range": false,
          "refId": "B"
        },
        {
          "editorMode": "code",
          "exemplar": false,
          "expr": "label_replace(\nlabel_replace(\n    clamp_min(\n        quantile without(ic_node, instance) (\n            0.5,\n                rate(mr_induct_batch_latency_seconds_sum{job=\"replica\",ic=\"$ic\",ic_subnet=~\"$ic_subnet\"}[$__range])\n            /\n                rate(mr_induct_batch_latency_seconds_count{job=\"replica\",ic=\"$ic\",ic_subnet=~\"$ic_subnet\"}[$__range])\n            -\n                rate(consensus_batch_delivery_interval_seconds_sum{job=\"replica\",ic=\"$ic\",ic_subnet=~\"$ic_subnet\"}[$__range])\n            /\n                rate(consensus_batch_delivery_interval_seconds_count{job=\"replica\",ic=\"$ic\",ic_subnet=~\"$ic_subnet\"}[$__range])\n        ),\n        0\n    ),\n    \"ic_subnet\", \"$1\", \"ic_subnet\", \"([a-z0-9]+)-.*\"),\n    \"step\", \"Induction\", \"ic_subnet\", \".*\"\n)",
          "hide": false,
          "instant": true,
          "interval": "",
          "legendFormat": "__auto",
          "range": false,
          "refId": "C"
        },
        {
          "editorMode": "code",
          "exemplar": false,
          "expr": "label_replace(\nlabel_replace(\n    quantile without(ic_node, instance) (\n        0.5,\n        histogram_quantile(\n            0.5,\n            rate(scheduler_canister_ingress_queue_latencies_seconds_bucket{job=\"replica\",ic=\"$ic\",ic_subnet=~\"$ic_subnet\"}[$__range])\n        )\n    ),\n    \"ic_subnet\", \"$1\", \"ic_subnet\", \"([a-z0-9]+)-.*\"),\n    \"step\", \"Ingress queue\", \"ic_subnet\", \".*\"\n) - 0.005",
          "hide": false,
          "instant": true,
          "interval": "",
          "legendFormat": "Ingress queue {{ic_subnet}}",
          "range": false,
          "refId": "D"
        },
        {
          "editorMode": "code",
          "exemplar": false,
          "expr": "label_replace(\nlabel_replace(\n    quantile without(ic_node, instance) (\n        0.5,\n            rate(mr_process_batch_duration_seconds_sum{job=\"replica\",ic=\"$ic\",ic_subnet=~\"$ic_subnet\"}[$__range])\n        /\n            rate(mr_process_batch_duration_seconds_count{job=\"replica\",ic=\"$ic\",ic_subnet=~\"$ic_subnet\"}[$__range])\n    ),\n    \"ic_subnet\", \"$1\", \"ic_subnet\", \"([a-z0-9]+)-.*\"),\n    \"step\", \"Processing\", \"ic_subnet\", \".*\"\n)",
          "hide": false,
          "instant": true,
          "interval": "",
          "legendFormat": "Processing {{ic_subnet}}",
          "range": false,
          "refId": "E"
        },
        {
          "editorMode": "code",
          "exemplar": false,
          "expr": "label_replace(\nlabel_replace(\n    quantile without(ic_node, instance) (\n        .5,\n            rate(state_manager_certification_latency_seconds_sum{job=\"replica\",ic=\"$ic\",ic_subnet=~\"$ic_subnet\"}[$__range])\n        /\n            rate(state_manager_certification_latency_seconds_count{job=\"replica\",ic=\"$ic\",ic_subnet=~\"$ic_subnet\"}[$__range])\n    ),\n    \"ic_subnet\", \"$1\", \"ic_subnet\", \"([a-z0-9]+)-.*\"),\n    \"step\", \"Certification\", \"ic_subnet\", \".*\"\n)",
          "hide": false,
          "instant": true,
          "legendFormat": "Certification {{ic_subnet}}",
          "range": false,
          "refId": "F"
        },
        {
          "editorMode": "code",
          "exemplar": false,
          "expr": "label_replace(\nlabel_replace(\n    quantile without(ic_node, instance) (\n        0.5,\n        histogram_quantile(\n            0.1,\n            rate(replica_http_ingress_watcher_wait_for_certification_duration_seconds_bucket{job=\"replica\",ic=\"$ic\",ic_subnet=~\"$ic_subnet\"}[$__range])\n        )\n    ),\n    \"ic_subnet\", \"$1\", \"ic_subnet\", \"([a-z0-9]+)-.*\"),\n    \"step\", \"Sync calls\", \"ic_subnet\", \".*\"\n)",
          "hide": true,
          "instant": true,
          "legendFormat": "Sync calls {{ic_subnet}}",
          "range": false,
          "refId": "G"
        }
      ],
      "title": "Mean End-to-End Latency, by Component",
      "transformations": [
        {
          "id": "prepareTimeSeries",
          "options": {
            "format": "multi"
          }
        },
        {
          "id": "joinByLabels",
          "options": {
            "join": [
              "ic_subnet"
            ],
            "value": "step"
          }
        },
        {
          "id": "calculateField",
          "options": {}
        },
        {
          "id": "sortBy",
          "options": {
            "fields": {},
            "sort": [
              {
                "desc": true,
                "field": "Total"
              }
            ]
          }
        },
        {
          "id": "filterFieldsByName",
          "options": {
            "include": {
              "names": [
                "ic_subnet",
                "Artifact pool",
                "Consensus",
                "Induction",
                "Ingress queue",
                "Processing",
                "Certification",
                "Total"
              ]
            }
          }
        }
      ],
      "transparent": true,
      "type": "barchart"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${datasource}"
      },
      "description": "Distribution of end-to-end ingress message latencies over the selected time range.\n\nFirst, the end-to-end latency averaged over **$period** is computed for the selected time range, with **$__interval** resolution. Out of these samples, the 50th (\"average round\"), 90th (\"busy round\") and 99th (\"checkpointing round\") latencies are displayed.",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisBorderShow": false,
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "fillOpacity": 60,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "lineWidth": 0,
            "scaleDistribution": {
              "type": "linear"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": []
          },
          "unit": "s"
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "50th percentile"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "dark-blue",
                  "mode": "fixed"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Delta to 90th percentile"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "blue",
                  "mode": "fixed"
                }
              },
              {
                "id": "custom.hideFrom",
                "value": {
                  "legend": false,
                  "tooltip": true,
                  "viz": false
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Delta to 99th percentile"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "super-light-blue",
                  "mode": "fixed"
                }
              },
              {
                "id": "custom.hideFrom",
                "value": {
                  "legend": false,
                  "tooltip": true,
                  "viz": false
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "90th percentile"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "blue",
                  "mode": "fixed"
                }
              },
              {
                "id": "custom.hideFrom",
                "value": {
                  "legend": false,
                  "tooltip": false,
                  "viz": true
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "99th percentile"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "super-light-blue",
                  "mode": "fixed"
                }
              },
              {
                "id": "custom.hideFrom",
                "value": {
                  "legend": false,
                  "tooltip": false,
                  "viz": true
                }
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 16,
        "w": 12,
        "x": 12,
        "y": 0
      },
      "id": 47,
      "options": {
        "barRadius": 0,
        "barWidth": 0.9,
        "fullHighlight": false,
        "groupWidth": 0.7,
        "legend": {
          "calcs": [],
          "displayMode": "list",
          "placement": "bottom",
          "showLegend": true
        },
        "orientation": "horizontal",
        "showValue": "never",
        "stacking": "normal",
        "tooltip": {
          "mode": "multi",
          "sort": "none"
        },
        "xTickLabelRotation": 0,
        "xTickLabelSpacing": 0
      },
      "pluginVersion": "11.3.0",
      "targets": [
        {
          "editorMode": "code",
          "exemplar": false,
          "expr": "label_replace(\nlabel_replace(\n    quantile by(ic_subnet) (\n        0.5,\n            # Block making backlog.\n            clamp_min(\n                (\n                        avg_over_time(xnet_pool_size_bytes{job=\"replica\",ic=\"$ic\",ic_subnet=~\"$ic_subnet\"}[$period])\n                    + on(instance) group_left\n                        avg_over_time(artifact_pool_artifact_bytes{job=\"replica\",ic=\"$ic\",ic_subnet=~\"$ic_subnet\",pool=\"ingress\",pool_type=\"validated\"}[$period])\n                    or # Ingress pool metrics are not populated with no ingress messages.\n                        avg_over_time(xnet_pool_size_bytes{job=\"replica\",ic=\"$ic\",ic_subnet=~\"$ic_subnet\"}[$period])\n                )\n                / (4 * 2^20)\n                - 1,\n                0\n            )\n        + on(ic_subnet, instance) group_left()\n        (\n            # Consensus: batch induction latency.\n                rate(mr_induct_batch_latency_seconds_sum{job=\"replica\",ic=\"$ic\",ic_subnet=~\"$ic_subnet\"}[$period])\n            /\n                rate(mr_induct_batch_latency_seconds_count{job=\"replica\",ic=\"$ic\",ic_subnet=~\"$ic_subnet\"}[$period])\n        )\n        + on(ic_subnet, instance) group_left()\n        (\n            # Ingress queue latency (not populated with no ingress messages).\n                histogram_quantile(\n                    0.5,\n                    rate(scheduler_canister_ingress_queue_latencies_seconds_bucket{job=\"replica\",ic=\"$ic\",ic_subnet=~\"$ic_subnet\"}[$period])\n                )\n            or # Fall back to zero.\n                0 * up{job=\"replica\",ic=\"$ic\",ic_subnet=~\"$ic_subnet\"}\n        )\n        + on(ic_subnet, instance) group_left()\n        (\n            # Processing: DSM round duration.\n                rate(mr_process_batch_duration_seconds_sum{job=\"replica\",ic=\"$ic\",ic_subnet=~\"$ic_subnet\"}[$period])\n            /\n                rate(mr_process_batch_duration_seconds_count{job=\"replica\",ic=\"$ic\",ic_subnet=~\"$ic_subnet\"}[$period])\n        )\n        + on(ic_subnet, instance) group_left\n            # Certification.\n                rate(state_manager_certification_latency_seconds_sum{job=\"replica\",ic=\"$ic\",ic_subnet=~\"$ic_subnet\"}[$period])\n            /\n                rate(state_manager_certification_latency_seconds_count{job=\"replica\",ic=\"$ic\",ic_subnet=~\"$ic_subnet\"}[$period])\n    ),\n    \"ic_subnet\", \"$1\", \"ic_subnet\", \"([a-z0-9]+)-.*\"),\n    \"step\", \"Block making\", \"ic_subnet\", \".*\"\n)",
          "hide": false,
          "instant": false,
          "interval": "",
          "legendFormat": "__auto",
          "range": true,
          "refId": "A"
        }
      ],
      "title": "End-to-End Latency, Percentiles",
      "transformations": [
        {
          "id": "prepareTimeSeries",
          "options": {
            "format": "multi"
          }
        },
        {
          "id": "joinByLabels",
          "options": {
            "join": [
              "ic_subnet"
            ],
            "value": "step"
          }
        },
        {
          "id": "groupBy",
          "options": {
            "fields": {
              "Block making": {
                "aggregations": [
                  "p50",
                  "p90",
                  "p99"
                ],
                "operation": "aggregate"
              },
              "ic_subnet": {
                "aggregations": [],
                "operation": "groupby"
              }
            }
          }
        },
        {
          "id": "sortBy",
          "options": {
            "fields": {},
            "sort": [
              {
                "desc": true,
                "field": "Block making (p99)"
              }
            ]
          }
        },
        {
          "id": "organize",
          "options": {
            "excludeByName": {},
            "includeByName": {},
            "indexByName": {},
            "renameByName": {
              "Block making (p10)": "10th percentile",
              "Block making (p50)": "50th percentile",
              "Block making (p90)": "90th percentile",
              "Block making (p99)": "99th percentile"
            }
          }
        },
        {
          "id": "calculateField",
          "options": {
            "binary": {
              "left": {
                "matcher": {
                  "id": "byName",
                  "options": "90th percentile"
                }
              },
              "operator": "-",
              "right": {
                "matcher": {
                  "id": "byName",
                  "options": "50th percentile"
                }
              }
            },
            "mode": "binary",
            "reduce": {
              "reducer": "sum"
            }
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "",
            "binary": {
              "left": {
                "matcher": {
                  "id": "byName",
                  "options": "99th percentile"
                }
              },
              "operator": "-",
              "right": {
                "matcher": {
                  "id": "byName",
                  "options": "90th percentile"
                }
              }
            },
            "mode": "binary",
            "reduce": {
              "reducer": "sum"
            }
          }
        },
        {
          "id": "organize",
          "options": {
            "excludeByName": {
              "90th percentile": false,
              "99th percentile": false
            },
            "includeByName": {},
            "indexByName": {},
            "renameByName": {
              "90th percentile - 50th percentile": "Delta to 90th percentile",
              "99th percentile - 90th percentile": "Delta to 99th percentile"
            }
          }
        }
      ],
      "transparent": true,
      "type": "barchart"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${datasource}"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "continuous-GrYlRd"
          },
          "custom": {
            "axisBorderShow": false,
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "fillOpacity": 60,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "lineWidth": 0,
            "scaleDistribution": {
              "type": "linear"
            },
            "thresholdsStyle": {
              "mode": "area"
            }
          },
          "fieldMinMax": false,
          "mappings": [],
          "max": 1154487200000,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "transparent",
                "value": null
              },
              {
                "color": "red",
                "value": 1099511627776
              }
            ]
          },
          "unit": "bytes"
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "Percentage full"
            },
            "properties": [
              {
                "id": "unit",
                "value": "percentunit"
              },
              {
                "id": "custom.hideFrom",
                "value": {
                  "legend": true,
                  "tooltip": false,
                  "viz": true
                }
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 16,
        "w": 12,
        "x": 0,
        "y": 16
      },
      "id": 52,
      "options": {
        "barRadius": 0,
        "barWidth": 0.9,
        "colorByField": "Storage",
        "fullHighlight": false,
        "groupWidth": 0.7,
        "legend": {
          "calcs": [],
          "displayMode": "list",
          "placement": "bottom",
          "showLegend": false
        },
        "orientation": "horizontal",
        "showValue": "never",
        "stacking": "normal",
        "tooltip": {
          "mode": "multi",
          "sort": "none"
        },
        "xTickLabelRotation": 0,
        "xTickLabelSpacing": 0
      },
      "pluginVersion": "11.3.0",
      "targets": [
        {
          "editorMode": "code",
          "exemplar": false,
          "expr": "label_replace(\nlabel_replace(\n    quantile by(ic_subnet) (\n        0.5,\n        max_over_time(canister_memory_usage_bytes{job=\"replica\",ic=\"$ic\",ic_subnet=~\"$ic_subnet\"}[$__range])\n    ),\n    \"ic_subnet\", \"$1\", \"ic_subnet\", \"(\\\\w+)-.+\"),\n    \"quantity\", \"Storage\", \"ic_subnet\", \".*\"\n)",
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "A"
        }
      ],
      "title": "Storage",
      "transformations": [
        {
          "id": "prepareTimeSeries",
          "options": {
            "format": "multi"
          }
        },
        {
          "id": "joinByLabels",
          "options": {
            "join": [
              "ic_subnet"
            ],
            "value": "quantity"
          }
        },
        {
          "id": "sortBy",
          "options": {
            "fields": {},
            "sort": [
              {
                "desc": true,
                "field": "Storage"
              }
            ]
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "Percentage full",
            "binary": {
              "left": {
                "matcher": {
                  "id": "byName",
                  "options": "Storage"
                }
              },
              "operator": "/",
              "right": {
                "fixed": "1.1e12"
              }
            },
            "mode": "binary",
            "reduce": {
              "reducer": "sum"
            }
          }
        }
      ],
      "transparent": true,
      "type": "barchart"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${datasource}"
      },
      "description": "Distribution of DSM execution thread duration over the selected time range.\n\nThe 50th (average thread), 90th (busy thread) and 99th (very busy thread) DSM thread duration over the selected time range.",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisBorderShow": false,
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "fillOpacity": 60,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "lineWidth": 0,
            "scaleDistribution": {
              "type": "linear"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          },
          "unit": "s"
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "50th percentile"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "dark-blue",
                  "mode": "fixed"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Delta to 90th percentile"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "blue",
                  "mode": "fixed"
                }
              },
              {
                "id": "custom.hideFrom",
                "value": {
                  "legend": false,
                  "tooltip": true,
                  "viz": false
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Delta to 99th percentile"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "super-light-blue",
                  "mode": "fixed"
                }
              },
              {
                "id": "custom.hideFrom",
                "value": {
                  "legend": false,
                  "tooltip": true,
                  "viz": false
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "90th percentile"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "blue",
                  "mode": "fixed"
                }
              },
              {
                "id": "custom.hideFrom",
                "value": {
                  "legend": false,
                  "tooltip": false,
                  "viz": true
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "99th percentile"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "super-light-blue",
                  "mode": "fixed"
                }
              },
              {
                "id": "custom.hideFrom",
                "value": {
                  "legend": false,
                  "tooltip": false,
                  "viz": true
                }
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 16,
        "w": 12,
        "x": 12,
        "y": 16
      },
      "id": 57,
      "options": {
        "barRadius": 0,
        "barWidth": 0.9,
        "fullHighlight": false,
        "groupWidth": 0.7,
        "legend": {
          "calcs": [],
          "displayMode": "list",
          "placement": "bottom",
          "showLegend": true
        },
        "orientation": "horizontal",
        "showValue": "never",
        "stacking": "normal",
        "tooltip": {
          "mode": "multi",
          "sort": "none"
        },
        "xTickLabelRotation": 0,
        "xTickLabelSpacing": 0
      },
      "pluginVersion": "11.3.0",
      "targets": [
        {
          "editorMode": "code",
          "exemplar": false,
          "expr": "label_replace(\nlabel_replace(\n    quantile by(le, ic_subnet) (\n        .5,\n        histogram_quantile(\n            .5,\n            increase(execution_round_inner_iteration_thread_duration_seconds_bucket{ic=\"$ic\",ic_subnet=~\"$ic_subnet\"}[$__range])\n        )\n    ),\n    \"ic_subnet\", \"$1\", \"ic_subnet\", \"([a-z0-9]+)-.*\"),\n    \"percentile\", \"50th percentile\", \"ic_subnet\", \".*\"\n)",
          "format": "heatmap",
          "hide": false,
          "instant": true,
          "interval": "",
          "legendFormat": "__auto",
          "range": false,
          "refId": "A"
        },
        {
          "editorMode": "code",
          "exemplar": false,
          "expr": "label_replace(\nlabel_replace(\n    quantile by(le, ic_subnet) (\n        .5,\n        histogram_quantile(\n            .9,\n            increase(execution_round_inner_iteration_thread_duration_seconds_bucket{ic=\"$ic\",ic_subnet=~\"$ic_subnet\"}[$__range])\n        )\n    ),\n    \"ic_subnet\", \"$1\", \"ic_subnet\", \"([a-z0-9]+)-.*\"),\n    \"percentile\", \"90th percentile\", \"ic_subnet\", \".*\"\n)",
          "format": "heatmap",
          "hide": false,
          "instant": true,
          "interval": "",
          "legendFormat": "__auto",
          "range": false,
          "refId": "B"
        },
        {
          "editorMode": "code",
          "exemplar": false,
          "expr": "label_replace(\nlabel_replace(\n    quantile by(le, ic_subnet) (\n        .5,\n        histogram_quantile(\n            .99,\n            increase(execution_round_inner_iteration_thread_duration_seconds_bucket{ic=\"$ic\",ic_subnet=~\"$ic_subnet\"}[$__range])\n        )\n    ),\n    \"ic_subnet\", \"$1\", \"ic_subnet\", \"([a-z0-9]+)-.*\"),\n    \"percentile\", \"99th percentile\", \"ic_subnet\", \".*\"\n)",
          "format": "heatmap",
          "hide": false,
          "instant": true,
          "interval": "",
          "legendFormat": "__auto",
          "range": false,
          "refId": "C"
        }
      ],
      "title": "Execution Thread Duration, Percentiles",
      "transformations": [
        {
          "disabled": true,
          "id": "prepareTimeSeries",
          "options": {
            "format": "wide"
          }
        },
        {
          "id": "joinByLabels",
          "options": {
            "join": [
              "ic_subnet"
            ],
            "value": "percentile"
          }
        },
        {
          "id": "sortBy",
          "options": {
            "fields": {},
            "sort": [
              {
                "desc": true,
                "field": "99th percentile"
              }
            ]
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "Delta to 90th percentile",
            "binary": {
              "left": {
                "matcher": {
                  "id": "byName",
                  "options": "90th percentile"
                }
              },
              "operator": "-",
              "right": {
                "matcher": {
                  "id": "byName",
                  "options": "50th percentile"
                }
              }
            },
            "mode": "binary",
            "reduce": {
              "reducer": "sum"
            }
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "Delta to 99th percentile",
            "binary": {
              "left": {
                "matcher": {
                  "id": "byName",
                  "options": "99th percentile"
                }
              },
              "operator": "-",
              "right": {
                "matcher": {
                  "id": "byName",
                  "options": "90th percentile"
                }
              }
            },
            "mode": "binary",
            "reduce": {
              "reducer": "sum"
            }
          }
        }
      ],
      "transparent": true,
      "type": "barchart"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${datasource}"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "continuous-GrYlRd"
          },
          "custom": {
            "axisBorderShow": false,
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "fillOpacity": 60,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "lineWidth": 0,
            "scaleDistribution": {
              "type": "linear"
            },
            "thresholdsStyle": {
              "mode": "area"
            }
          },
          "fieldMinMax": false,
          "mappings": [],
          "max": 126000,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "transparent",
                "value": null
              },
              {
                "color": "red",
                "value": 120000
              }
            ]
          },
          "unit": "short"
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "Percentage full"
            },
            "properties": [
              {
                "id": "unit",
                "value": "percentunit"
              },
              {
                "id": "custom.hideFrom",
                "value": {
                  "legend": true,
                  "tooltip": false,
                  "viz": true
                }
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 16,
        "w": 12,
        "x": 0,
        "y": 32
      },
      "id": 53,
      "options": {
        "barRadius": 0,
        "barWidth": 0.9,
        "colorByField": "Canisters",
        "fullHighlight": false,
        "groupWidth": 0.7,
        "legend": {
          "calcs": [],
          "displayMode": "list",
          "placement": "bottom",
          "showLegend": false
        },
        "orientation": "horizontal",
        "showValue": "never",
        "stacking": "normal",
        "tooltip": {
          "mode": "multi",
          "sort": "none"
        },
        "xTickLabelRotation": 0,
        "xTickLabelSpacing": 0
      },
      "pluginVersion": "11.3.0",
      "targets": [
        {
          "editorMode": "code",
          "exemplar": false,
          "expr": "label_replace(\nlabel_replace(\n    quantile by(ic_subnet) (\n        0.5,\n        sum without(status) (\n            replicated_state_registered_canisters{job=\"replica\",ic=\"$ic\",ic_subnet=~\"$ic_subnet\"}\n        )\n    ),\n    \"ic_subnet\", \"$1\", \"ic_subnet\", \"(\\\\w+)-.+\"),\n    \"quantity\", \"Canisters\", \"ic_subnet\", \".*\"\n)",
          "instant": true,
          "legendFormat": "__auto",
          "range": false,
          "refId": "A"
        }
      ],
      "title": "Canisters",
      "transformations": [
        {
          "id": "prepareTimeSeries",
          "options": {
            "format": "multi"
          }
        },
        {
          "id": "joinByLabels",
          "options": {
            "join": [
              "ic_subnet"
            ],
            "value": "quantity"
          }
        },
        {
          "id": "sortBy",
          "options": {
            "fields": {},
            "sort": [
              {
                "desc": true,
                "field": "Canisters"
              }
            ]
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "Percentage full",
            "binary": {
              "left": {
                "matcher": {
                  "id": "byName",
                  "options": "Canisters"
                }
              },
              "operator": "/",
              "right": {
                "fixed": "120000"
              }
            },
            "mode": "binary",
            "reduce": {
              "reducer": "sum"
            }
          }
        }
      ],
      "transparent": true,
      "type": "barchart"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "${datasource}"
      },
      "description": "Distribution of block sizes over the selected time range.\n\nThe 50th (average), 90th (large) and 99th (very large) percentile block sizes over the selected time range.",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisBorderShow": false,
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "fillOpacity": 60,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "lineWidth": 0,
            "scaleDistribution": {
              "type": "linear"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "max": 4200000,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          },
          "unit": "bytes"
        },
        "overrides": [
          {
            "matcher": {
              "id": "byName",
              "options": "50th percentile"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "dark-blue",
                  "mode": "fixed"
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Delta to 90th percentile"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "blue",
                  "mode": "fixed"
                }
              },
              {
                "id": "custom.hideFrom",
                "value": {
                  "legend": false,
                  "tooltip": true,
                  "viz": false
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "Delta to 99th percentile"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "super-light-blue",
                  "mode": "fixed"
                }
              },
              {
                "id": "custom.hideFrom",
                "value": {
                  "legend": false,
                  "tooltip": true,
                  "viz": false
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "90th percentile"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "blue",
                  "mode": "fixed"
                }
              },
              {
                "id": "custom.hideFrom",
                "value": {
                  "legend": false,
                  "tooltip": false,
                  "viz": true
                }
              }
            ]
          },
          {
            "matcher": {
              "id": "byName",
              "options": "99th percentile"
            },
            "properties": [
              {
                "id": "color",
                "value": {
                  "fixedColor": "super-light-blue",
                  "mode": "fixed"
                }
              },
              {
                "id": "custom.hideFrom",
                "value": {
                  "legend": false,
                  "tooltip": false,
                  "viz": true
                }
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 16,
        "w": 12,
        "x": 12,
        "y": 32
      },
      "id": 55,
      "options": {
        "barRadius": 0,
        "barWidth": 0.9,
        "fullHighlight": false,
        "groupWidth": 0.7,
        "legend": {
          "calcs": [],
          "displayMode": "list",
          "placement": "bottom",
          "showLegend": true
        },
        "orientation": "horizontal",
        "showValue": "never",
        "stacking": "normal",
        "tooltip": {
          "mode": "multi",
          "sort": "none"
        },
        "xTickLabelRotation": 0,
        "xTickLabelSpacing": 0
      },
      "pluginVersion": "11.3.0",
      "targets": [
        {
          "editorMode": "code",
          "exemplar": false,
          "expr": "label_replace(\nlabel_replace(\n    quantile by(le, ic_subnet) (\n        .5,\n        histogram_quantile(\n            .5,\n            increase(consensus_payload_size_bytes_bucket{ic=\"$ic\",ic_subnet=~\"$ic_subnet\"}[$__range])\n        )\n    ),\n    \"ic_subnet\", \"$1\", \"ic_subnet\", \"([a-z0-9]+)-.*\"),\n    \"percentile\", \"50th percentile\", \"ic_subnet\", \".*\"\n)",
          "format": "heatmap",
          "hide": false,
          "instant": true,
          "interval": "",
          "legendFormat": "__auto",
          "range": false,
          "refId": "A"
        },
        {
          "editorMode": "code",
          "exemplar": false,
          "expr": "label_replace(\nlabel_replace(\n    quantile by(le, ic_subnet) (\n        .5,\n        histogram_quantile(\n            .9,\n            increase(consensus_payload_size_bytes_bucket{ic=\"$ic\",ic_subnet=~\"$ic_subnet\"}[$__range])\n        )\n    ),\n    \"ic_subnet\", \"$1\", \"ic_subnet\", \"([a-z0-9]+)-.*\"),\n    \"percentile\", \"90th percentile\", \"ic_subnet\", \".*\"\n)",
          "format": "heatmap",
          "hide": false,
          "instant": true,
          "interval": "",
          "legendFormat": "__auto",
          "range": false,
          "refId": "B"
        },
        {
          "editorMode": "code",
          "exemplar": false,
          "expr": "label_replace(\nlabel_replace(\n    quantile by(le, ic_subnet) (\n        .5,\n        histogram_quantile(\n            .99,\n            increase(consensus_payload_size_bytes_bucket{ic=\"$ic\",ic_subnet=~\"$ic_subnet\"}[$__range])\n        )\n    ),\n    \"ic_subnet\", \"$1\", \"ic_subnet\", \"([a-z0-9]+)-.*\"),\n    \"percentile\", \"99th percentile\", \"ic_subnet\", \".*\"\n)",
          "format": "heatmap",
          "hide": false,
          "instant": true,
          "interval": "",
          "legendFormat": "__auto",
          "range": false,
          "refId": "C"
        }
      ],
      "title": "(Block) Bandwidth Usage, Percentiles",
      "transformations": [
        {
          "disabled": true,
          "id": "prepareTimeSeries",
          "options": {
            "format": "wide"
          }
        },
        {
          "id": "joinByLabels",
          "options": {
            "join": [
              "ic_subnet"
            ],
            "value": "percentile"
          }
        },
        {
          "id": "sortBy",
          "options": {
            "fields": {},
            "sort": [
              {
                "desc": true,
                "field": "99th percentile"
              }
            ]
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "Delta to 90th percentile",
            "binary": {
              "left": {
                "matcher": {
                  "id": "byName",
                  "options": "90th percentile"
                }
              },
              "operator": "-",
              "right": {
                "matcher": {
                  "id": "byName",
                  "options": "50th percentile"
                }
              }
            },
            "mode": "binary",
            "reduce": {
              "reducer": "sum"
            }
          }
        },
        {
          "id": "calculateField",
          "options": {
            "alias": "Delta to 99th percentile",
            "binary": {
              "left": {
                "matcher": {
                  "id": "byName",
                  "options": "99th percentile"
                }
              },
              "operator": "-",
              "right": {
                "matcher": {
                  "id": "byName",
                  "options": "90th percentile"
                }
              }
            },
            "mode": "binary",
            "reduce": {
              "reducer": "sum"
            }
          }
        }
      ],
      "transparent": true,
      "type": "barchart"
    },
    {
      "collapsed": true,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 48
      },
      "id": 50,
      "panels": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "fillOpacity": 60,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineWidth": 0,
                "scaleDistribution": {
                  "type": "linear"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": []
              },
              "unit": "ops"
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byName",
                  "options": "Total"
                },
                "properties": [
                  {
                    "id": "custom.hideFrom",
                    "value": {
                      "legend": true,
                      "tooltip": false,
                      "viz": true
                    }
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 16,
            "w": 12,
            "x": 0,
            "y": 49
          },
          "id": 68,
          "options": {
            "barRadius": 0,
            "barWidth": 0.9,
            "fullHighlight": false,
            "groupWidth": 0.7,
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "orientation": "horizontal",
            "showValue": "never",
            "stacking": "normal",
            "tooltip": {
              "mode": "multi",
              "sort": "none"
            },
            "xTickLabelRotation": 0,
            "xTickLabelSpacing": 0
          },
          "pluginVersion": "11.3.0",
          "targets": [
            {
              "editorMode": "code",
              "exemplar": false,
              "expr": "label_replace(\n    quantile without(ic_node, instance) (\n        0.5,\n        sum without(status, wasm_execution_mode) (\n            rate(sandboxed_execution_executed_message_slices_total{job=\"replica\",ic=\"$ic\",ic_subnet=~\"$ic_subnet\",api_type!~\"non[ -]replicated.*|inspect message\"}[$__range])\n        )\n    ),\n    \"ic_subnet\", \"$1\", \"ic_subnet\", \"([a-z0-9]+)-.*\"\n)",
              "hide": false,
              "instant": true,
              "interval": "",
              "legendFormat": "Artifact pool {{ic_subnet}}",
              "range": false,
              "refId": "A"
            }
          ],
          "title": "Mean Replicated Message Executions, by Type",
          "transformations": [
            {
              "id": "prepareTimeSeries",
              "options": {
                "format": "multi"
              }
            },
            {
              "id": "joinByLabels",
              "options": {
                "join": [
                  "ic_subnet"
                ],
                "value": "api_type"
              }
            },
            {
              "id": "calculateField",
              "options": {}
            },
            {
              "id": "sortBy",
              "options": {
                "fields": {},
                "sort": [
                  {
                    "desc": true,
                    "field": "Total"
                  }
                ]
              }
            }
          ],
          "transparent": true,
          "type": "barchart"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "fillOpacity": 60,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineWidth": 0,
                "scaleDistribution": {
                  "type": "linear"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": []
              },
              "unit": "ops"
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byName",
                  "options": "Sync calls"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "blue",
                      "mode": "fixed"
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Certification"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "semi-dark-green",
                      "mode": "fixed"
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Processing"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "semi-dark-orange",
                      "mode": "fixed"
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Ingress queue"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "light-orange",
                      "mode": "fixed"
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Induction"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "yellow",
                      "mode": "fixed"
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Consensus"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "green",
                      "mode": "fixed"
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Artifact pool"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "purple",
                      "mode": "fixed"
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Total"
                },
                "properties": [
                  {
                    "id": "custom.hideFrom",
                    "value": {
                      "legend": true,
                      "tooltip": false,
                      "viz": true
                    }
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 16,
            "w": 12,
            "x": 12,
            "y": 49
          },
          "id": 69,
          "options": {
            "barRadius": 0,
            "barWidth": 0.9,
            "fullHighlight": false,
            "groupWidth": 0.7,
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "orientation": "horizontal",
            "showValue": "never",
            "stacking": "normal",
            "tooltip": {
              "mode": "multi",
              "sort": "none"
            },
            "xTickLabelRotation": 0,
            "xTickLabelSpacing": 0
          },
          "pluginVersion": "11.3.0",
          "targets": [
            {
              "editorMode": "code",
              "exemplar": false,
              "expr": "label_replace(\n    sum without(ic_node, instance, status, wasm_execution_mode) (\n        rate(sandboxed_execution_executed_message_slices_total{job=\"replica\",ic=\"$ic\",ic_subnet=~\"$ic_subnet\",api_type=~\"non[ -]replicated.*|inspect message\"}[$__range])\n    ),\n    \"ic_subnet\", \"$1\", \"ic_subnet\", \"([a-z0-9]+)-.*\"\n)",
              "hide": false,
              "instant": true,
              "interval": "",
              "legendFormat": "Artifact pool {{ic_subnet}}",
              "range": false,
              "refId": "A"
            }
          ],
          "title": "Mean Non-Replicated Message Executions, by Type",
          "transformations": [
            {
              "id": "prepareTimeSeries",
              "options": {
                "format": "multi"
              }
            },
            {
              "id": "joinByLabels",
              "options": {
                "join": [
                  "ic_subnet"
                ],
                "value": "api_type"
              }
            },
            {
              "id": "calculateField",
              "options": {}
            },
            {
              "id": "sortBy",
              "options": {
                "fields": {},
                "sort": [
                  {
                    "desc": true,
                    "field": "Total"
                  }
                ]
              }
            }
          ],
          "transparent": true,
          "type": "barchart"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "description": "Distribution of DSM round duration over the selected time range.\n\nThe 50th (average), 90th (slow) and 99th (very slow) DSM rounds over the selected time range.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "fillOpacity": 60,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineWidth": 0,
                "scaleDistribution": {
                  "type": "linear"
                },
                "thresholdsStyle": {
                  "mode": "area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "transparent"
                  },
                  {
                    "color": "red",
                    "value": 1
                  }
                ]
              },
              "unit": "s"
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byName",
                  "options": "50th percentile"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "dark-blue",
                      "mode": "fixed"
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Delta to 90th percentile"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "blue",
                      "mode": "fixed"
                    }
                  },
                  {
                    "id": "custom.hideFrom",
                    "value": {
                      "legend": false,
                      "tooltip": true,
                      "viz": false
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Delta to 99th percentile"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "super-light-blue",
                      "mode": "fixed"
                    }
                  },
                  {
                    "id": "custom.hideFrom",
                    "value": {
                      "legend": false,
                      "tooltip": true,
                      "viz": false
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "90th percentile"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "blue",
                      "mode": "fixed"
                    }
                  },
                  {
                    "id": "custom.hideFrom",
                    "value": {
                      "legend": false,
                      "tooltip": false,
                      "viz": true
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "99th percentile"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "super-light-blue",
                      "mode": "fixed"
                    }
                  },
                  {
                    "id": "custom.hideFrom",
                    "value": {
                      "legend": false,
                      "tooltip": false,
                      "viz": true
                    }
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 16,
            "w": 12,
            "x": 0,
            "y": 113
          },
          "id": 65,
          "options": {
            "barRadius": 0,
            "barWidth": 0.9,
            "fullHighlight": false,
            "groupWidth": 0.7,
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "orientation": "horizontal",
            "showValue": "never",
            "stacking": "normal",
            "tooltip": {
              "mode": "multi",
              "sort": "none"
            },
            "xTickLabelRotation": 0,
            "xTickLabelSpacing": 0
          },
          "pluginVersion": "11.3.0",
          "targets": [
            {
              "editorMode": "code",
              "exemplar": false,
              "expr": "label_replace(\nlabel_replace(\n    quantile by(le, ic_subnet) (\n        .5,\n        histogram_quantile(\n            .5,\n            rate(mr_process_batch_duration_seconds_bucket{ic=\"$ic\",ic_subnet=~\"$ic_subnet\"}[$__range])\n        )\n    ),\n    \"ic_subnet\", \"$1\", \"ic_subnet\", \"([a-z0-9]+)-.*\"),\n    \"percentile\", \"50th percentile\", \"ic_subnet\", \".*\"\n)",
              "format": "heatmap",
              "hide": false,
              "instant": true,
              "interval": "",
              "legendFormat": "__auto",
              "range": false,
              "refId": "A"
            },
            {
              "editorMode": "code",
              "exemplar": false,
              "expr": "label_replace(\nlabel_replace(\n    quantile by(le, ic_subnet) (\n        .5,\n        histogram_quantile(\n            .9,\n            rate(mr_process_batch_duration_seconds_bucket{ic=\"$ic\",ic_subnet=~\"$ic_subnet\"}[$__range])\n        )\n    ),\n    \"ic_subnet\", \"$1\", \"ic_subnet\", \"([a-z0-9]+)-.*\"),\n    \"percentile\", \"90th percentile\", \"ic_subnet\", \".*\"\n)",
              "format": "heatmap",
              "hide": false,
              "instant": true,
              "interval": "",
              "legendFormat": "__auto",
              "range": false,
              "refId": "B"
            },
            {
              "editorMode": "code",
              "exemplar": false,
              "expr": "label_replace(\nlabel_replace(\n    quantile by(le, ic_subnet) (\n        .5,\n        histogram_quantile(\n            .99,\n            rate(mr_process_batch_duration_seconds_bucket{ic=\"$ic\",ic_subnet=~\"$ic_subnet\"}[$__range])\n        )\n    ),\n    \"ic_subnet\", \"$1\", \"ic_subnet\", \"([a-z0-9]+)-.*\"),\n    \"percentile\", \"99th percentile\", \"ic_subnet\", \".*\"\n)",
              "format": "heatmap",
              "hide": false,
              "instant": true,
              "interval": "",
              "legendFormat": "__auto",
              "range": false,
              "refId": "C"
            }
          ],
          "title": "DSM Round Duration, Percentiles",
          "transformations": [
            {
              "disabled": true,
              "id": "prepareTimeSeries",
              "options": {
                "format": "wide"
              }
            },
            {
              "id": "joinByLabels",
              "options": {
                "join": [
                  "ic_subnet"
                ],
                "value": "percentile"
              }
            },
            {
              "id": "sortBy",
              "options": {
                "fields": {},
                "sort": [
                  {
                    "desc": true,
                    "field": "99th percentile"
                  }
                ]
              }
            },
            {
              "id": "calculateField",
              "options": {
                "alias": "Delta to 90th percentile",
                "binary": {
                  "left": {
                    "matcher": {
                      "id": "byName",
                      "options": "90th percentile"
                    }
                  },
                  "operator": "-",
                  "right": {
                    "matcher": {
                      "id": "byName",
                      "options": "50th percentile"
                    }
                  }
                },
                "mode": "binary",
                "reduce": {
                  "reducer": "sum"
                }
              }
            },
            {
              "id": "calculateField",
              "options": {
                "alias": "Delta to 99th percentile",
                "binary": {
                  "left": {
                    "matcher": {
                      "id": "byName",
                      "options": "99th percentile"
                    }
                  },
                  "operator": "-",
                  "right": {
                    "matcher": {
                      "id": "byName",
                      "options": "90th percentile"
                    }
                  }
                },
                "mode": "binary",
                "reduce": {
                  "reducer": "sum"
                }
              }
            }
          ],
          "transparent": true,
          "type": "barchart"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "description": "Distribution of instructions executed per DSM core over the selected time range.\n\nThe 50th (average), 90th (slow) and 99th (very slow) DSM rounds over the selected time range.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "fillOpacity": 60,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineWidth": 0,
                "scaleDistribution": {
                  "type": "linear"
                },
                "thresholdsStyle": {
                  "mode": "area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "transparent",
                    "value": null
                  },
                  {
                    "color": "red",
                    "value": 2000000000
                  }
                ]
              },
              "unit": "short"
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byName",
                  "options": "50th percentile"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "dark-blue",
                      "mode": "fixed"
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Delta to 90th percentile"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "blue",
                      "mode": "fixed"
                    }
                  },
                  {
                    "id": "custom.hideFrom",
                    "value": {
                      "legend": false,
                      "tooltip": true,
                      "viz": false
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Delta to 99th percentile"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "super-light-blue",
                      "mode": "fixed"
                    }
                  },
                  {
                    "id": "custom.hideFrom",
                    "value": {
                      "legend": false,
                      "tooltip": true,
                      "viz": false
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "90th percentile"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "blue",
                      "mode": "fixed"
                    }
                  },
                  {
                    "id": "custom.hideFrom",
                    "value": {
                      "legend": false,
                      "tooltip": false,
                      "viz": true
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "99th percentile"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "super-light-blue",
                      "mode": "fixed"
                    }
                  },
                  {
                    "id": "custom.hideFrom",
                    "value": {
                      "legend": false,
                      "tooltip": false,
                      "viz": true
                    }
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 16,
            "w": 12,
            "x": 12,
            "y": 113
          },
          "id": 70,
          "options": {
            "barRadius": 0,
            "barWidth": 0.9,
            "fullHighlight": false,
            "groupWidth": 0.7,
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "orientation": "horizontal",
            "showValue": "never",
            "stacking": "normal",
            "tooltip": {
              "mode": "multi",
              "sort": "none"
            },
            "xTickLabelRotation": 0,
            "xTickLabelSpacing": 0
          },
          "pluginVersion": "11.3.0",
          "targets": [
            {
              "editorMode": "code",
              "exemplar": false,
              "expr": "label_replace(\nlabel_replace(\n    quantile by(le, ic_subnet) (\n        .5,\n        histogram_quantile(\n            .5,\n            rate(execution_round_inner_iteration_thread_instructions_bucket{ic=\"$ic\",ic_subnet=~\"$ic_subnet\"}[$__range])\n        )\n    ),\n    \"ic_subnet\", \"$1\", \"ic_subnet\", \"([a-z0-9]+)-.*\"),\n    \"percentile\", \"50th percentile\", \"ic_subnet\", \".*\"\n)",
              "format": "heatmap",
              "hide": false,
              "instant": true,
              "interval": "",
              "legendFormat": "__auto",
              "range": false,
              "refId": "A"
            },
            {
              "editorMode": "code",
              "exemplar": false,
              "expr": "label_replace(\nlabel_replace(\n    quantile by(le, ic_subnet) (\n        .5,\n        histogram_quantile(\n            .9,\n            rate(execution_round_inner_iteration_thread_instructions_bucket{ic=\"$ic\",ic_subnet=~\"$ic_subnet\"}[$__range])\n        )\n    ),\n    \"ic_subnet\", \"$1\", \"ic_subnet\", \"([a-z0-9]+)-.*\"),\n    \"percentile\", \"90th percentile\", \"ic_subnet\", \".*\"\n)",
              "format": "heatmap",
              "hide": false,
              "instant": true,
              "interval": "",
              "legendFormat": "__auto",
              "range": false,
              "refId": "B"
            },
            {
              "editorMode": "code",
              "exemplar": false,
              "expr": "label_replace(\nlabel_replace(\n    quantile by(le, ic_subnet) (\n        .5,\n        histogram_quantile(\n            .99,\n            rate(execution_round_inner_iteration_thread_instructions_bucket{ic=\"$ic\",ic_subnet=~\"$ic_subnet\"}[$__range])\n        )\n    ),\n    \"ic_subnet\", \"$1\", \"ic_subnet\", \"([a-z0-9]+)-.*\"),\n    \"percentile\", \"99th percentile\", \"ic_subnet\", \".*\"\n)",
              "format": "heatmap",
              "hide": false,
              "instant": true,
              "interval": "",
              "legendFormat": "__auto",
              "range": false,
              "refId": "C"
            }
          ],
          "title": "DSM Core Instructions, Percentiles",
          "transformations": [
            {
              "disabled": true,
              "id": "prepareTimeSeries",
              "options": {
                "format": "wide"
              }
            },
            {
              "id": "joinByLabels",
              "options": {
                "join": [
                  "ic_subnet"
                ],
                "value": "percentile"
              }
            },
            {
              "id": "sortBy",
              "options": {
                "fields": {},
                "sort": [
                  {
                    "desc": true,
                    "field": "99th percentile"
                  }
                ]
              }
            },
            {
              "id": "calculateField",
              "options": {
                "alias": "Delta to 90th percentile",
                "binary": {
                  "left": {
                    "matcher": {
                      "id": "byName",
                      "options": "90th percentile"
                    }
                  },
                  "operator": "-",
                  "right": {
                    "matcher": {
                      "id": "byName",
                      "options": "50th percentile"
                    }
                  }
                },
                "mode": "binary",
                "reduce": {
                  "reducer": "sum"
                }
              }
            },
            {
              "id": "calculateField",
              "options": {
                "alias": "Delta to 99th percentile",
                "binary": {
                  "left": {
                    "matcher": {
                      "id": "byName",
                      "options": "99th percentile"
                    }
                  },
                  "operator": "-",
                  "right": {
                    "matcher": {
                      "id": "byName",
                      "options": "90th percentile"
                    }
                  }
                },
                "mode": "binary",
                "reduce": {
                  "reducer": "sum"
                }
              }
            }
          ],
          "transparent": true,
          "type": "barchart"
        }
      ],
      "title": "DSM",
      "type": "row"
    },
    {
      "collapsed": true,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 49
      },
      "id": 25,
      "panels": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "description": "Distribution of network byte transmission rates over the selected time range.\n\nFirst, the network transmission rate is averaged over **$period**, with **$__interval** resolution. Out of these samples, the 50th (\"average\"), 90th (\"high\") and 99th (\"peak\") transmission rates are displayed.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "fillOpacity": 60,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineWidth": 0,
                "scaleDistribution": {
                  "type": "linear"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": []
              },
              "unit": "binBps"
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byName",
                  "options": "50th percentile"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "dark-blue",
                      "mode": "fixed"
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Delta to 90th percentile"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "blue",
                      "mode": "fixed"
                    }
                  },
                  {
                    "id": "custom.hideFrom",
                    "value": {
                      "legend": false,
                      "tooltip": true,
                      "viz": false
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Delta to 99th percentile"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "super-light-blue",
                      "mode": "fixed"
                    }
                  },
                  {
                    "id": "custom.hideFrom",
                    "value": {
                      "legend": false,
                      "tooltip": true,
                      "viz": false
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "90th percentile"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "blue",
                      "mode": "fixed"
                    }
                  },
                  {
                    "id": "custom.hideFrom",
                    "value": {
                      "legend": false,
                      "tooltip": false,
                      "viz": true
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "99th percentile"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "super-light-blue",
                      "mode": "fixed"
                    }
                  },
                  {
                    "id": "custom.hideFrom",
                    "value": {
                      "legend": false,
                      "tooltip": false,
                      "viz": true
                    }
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 16,
            "w": 12,
            "x": 0,
            "y": 50
          },
          "id": 58,
          "options": {
            "barRadius": 0,
            "barWidth": 0.9,
            "fullHighlight": false,
            "groupWidth": 0.7,
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "orientation": "horizontal",
            "showValue": "never",
            "stacking": "normal",
            "tooltip": {
              "mode": "multi",
              "sort": "none"
            },
            "xTickLabelRotation": 0,
            "xTickLabelSpacing": 0
          },
          "pluginVersion": "11.3.0",
          "targets": [
            {
              "editorMode": "code",
              "exemplar": false,
              "expr": "label_replace(\n    quantile by(ic, ic_subnet) (\n        0.5,\n        sum without(device) (\n            rate(node_network_transmit_bytes_total{job=\"node_exporter\",ic=\"$ic\",ic_subnet=~\"$ic_subnet\"}[$period])\n        )\n   ),\n    \"ic_subnet\", \"$1\", \"ic_subnet\", \"([a-z0-9]+)-.*\"\n)",
              "hide": false,
              "instant": false,
              "interval": "",
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Network Bytes Transmitted, Percentiles",
          "transformations": [
            {
              "id": "prepareTimeSeries",
              "options": {
                "format": "multi"
              }
            },
            {
              "id": "joinByLabels",
              "options": {
                "join": [
                  "ic_subnet"
                ],
                "value": "ic"
              }
            },
            {
              "id": "groupBy",
              "options": {
                "fields": {
                  "Block making": {
                    "aggregations": [
                      "p50",
                      "p90",
                      "p99"
                    ],
                    "operation": "aggregate"
                  },
                  "ic_subnet": {
                    "aggregations": [],
                    "operation": "groupby"
                  },
                  "mercury": {
                    "aggregations": [
                      "p50",
                      "p90",
                      "p99"
                    ],
                    "operation": "aggregate"
                  }
                }
              }
            },
            {
              "id": "sortBy",
              "options": {
                "fields": {},
                "sort": [
                  {
                    "desc": true,
                    "field": "mercury (p50)"
                  }
                ]
              }
            },
            {
              "id": "filterFieldsByName",
              "options": {
                "include": {
                  "names": [
                    "ic_subnet",
                    "mercury (p50)",
                    "mercury (p90)",
                    "mercury (p99)"
                  ]
                }
              }
            },
            {
              "id": "organize",
              "options": {
                "excludeByName": {},
                "includeByName": {},
                "indexByName": {},
                "renameByName": {
                  "Block making (p10)": "10th percentile",
                  "Block making (p50)": "50th percentile",
                  "Block making (p90)": "90th percentile",
                  "Block making (p99)": "99th percentile",
                  "mercury (p50)": "50th percentile",
                  "mercury (p90)": "90th percentile",
                  "mercury (p99)": "99th percentile"
                }
              }
            },
            {
              "id": "calculateField",
              "options": {
                "binary": {
                  "left": {
                    "matcher": {
                      "id": "byName",
                      "options": "90th percentile"
                    }
                  },
                  "operator": "-",
                  "right": {
                    "matcher": {
                      "id": "byName",
                      "options": "50th percentile"
                    }
                  }
                },
                "mode": "binary",
                "reduce": {
                  "reducer": "sum"
                }
              }
            },
            {
              "id": "calculateField",
              "options": {
                "alias": "",
                "binary": {
                  "left": {
                    "matcher": {
                      "id": "byName",
                      "options": "99th percentile"
                    }
                  },
                  "operator": "-",
                  "right": {
                    "matcher": {
                      "id": "byName",
                      "options": "90th percentile"
                    }
                  }
                },
                "mode": "binary",
                "reduce": {
                  "reducer": "sum"
                }
              }
            },
            {
              "id": "organize",
              "options": {
                "excludeByName": {
                  "90th percentile": false,
                  "99th percentile": false
                },
                "includeByName": {},
                "indexByName": {},
                "renameByName": {
                  "90th percentile - 50th percentile": "Delta to 90th percentile",
                  "99th percentile - 90th percentile": "Delta to 99th percentile",
                  "ic_subnet": "Subnet"
                }
              }
            }
          ],
          "transparent": true,
          "type": "barchart"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "description": "Distribution of disk write latencies over the selected time range.\n\nFirst, the disk write latency is averaged over **$period**, with **$__interval** resolution. Out of these samples, the 50th (\"average\"), 90th (\"high\") and 99th (\"peak\") write latencies are displayed.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "fillOpacity": 60,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineWidth": 0,
                "scaleDistribution": {
                  "type": "linear"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": []
              },
              "unit": "s"
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byName",
                  "options": "50th percentile"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "dark-blue",
                      "mode": "fixed"
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Delta to 90th percentile"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "blue",
                      "mode": "fixed"
                    }
                  },
                  {
                    "id": "custom.hideFrom",
                    "value": {
                      "legend": false,
                      "tooltip": true,
                      "viz": false
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Delta to 99th percentile"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "super-light-blue",
                      "mode": "fixed"
                    }
                  },
                  {
                    "id": "custom.hideFrom",
                    "value": {
                      "legend": false,
                      "tooltip": true,
                      "viz": false
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "90th percentile"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "blue",
                      "mode": "fixed"
                    }
                  },
                  {
                    "id": "custom.hideFrom",
                    "value": {
                      "legend": false,
                      "tooltip": false,
                      "viz": true
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "99th percentile"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "super-light-blue",
                      "mode": "fixed"
                    }
                  },
                  {
                    "id": "custom.hideFrom",
                    "value": {
                      "legend": false,
                      "tooltip": false,
                      "viz": true
                    }
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 16,
            "w": 12,
            "x": 12,
            "y": 50
          },
          "id": 60,
          "options": {
            "barRadius": 0,
            "barWidth": 0.9,
            "fullHighlight": false,
            "groupWidth": 0.7,
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "orientation": "horizontal",
            "showValue": "never",
            "stacking": "normal",
            "tooltip": {
              "mode": "multi",
              "sort": "none"
            },
            "xTickLabelRotation": 0,
            "xTickLabelSpacing": 0
          },
          "pluginVersion": "11.3.0",
          "targets": [
            {
              "editorMode": "code",
              "exemplar": false,
              "expr": "label_replace(\n    quantile by(ic, ic_subnet) (\n        0.5,\n            rate(node_disk_write_time_seconds_total{job=~\"node_exporter.*\",ic=\"$ic\",ic_subnet=~\"$ic_subnet\",device=\"vda\"}[$period])\n        /\n            rate(node_disk_writes_completed_total{job=~\"node_exporter.*\",ic=\"$ic\",ic_subnet=~\"$ic_subnet\",device=\"vda\"}[$period])\n   ),\n    \"ic_subnet\", \"$1\", \"ic_subnet\", \"([a-z0-9]+)-.*\"\n)",
              "hide": false,
              "instant": false,
              "interval": "",
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Disk Write Latency, Percentiles",
          "transformations": [
            {
              "id": "prepareTimeSeries",
              "options": {
                "format": "multi"
              }
            },
            {
              "id": "joinByLabels",
              "options": {
                "join": [
                  "ic_subnet"
                ],
                "value": "ic"
              }
            },
            {
              "id": "groupBy",
              "options": {
                "fields": {
                  "Block making": {
                    "aggregations": [
                      "p50",
                      "p90",
                      "p99"
                    ],
                    "operation": "aggregate"
                  },
                  "ic_subnet": {
                    "aggregations": [],
                    "operation": "groupby"
                  },
                  "mercury": {
                    "aggregations": [
                      "p50",
                      "p90",
                      "p99"
                    ],
                    "operation": "aggregate"
                  }
                }
              }
            },
            {
              "id": "sortBy",
              "options": {
                "fields": {},
                "sort": [
                  {
                    "desc": true,
                    "field": "mercury (p50)"
                  }
                ]
              }
            },
            {
              "id": "filterFieldsByName",
              "options": {
                "include": {
                  "names": [
                    "ic_subnet",
                    "mercury (p50)",
                    "mercury (p90)",
                    "mercury (p99)"
                  ]
                }
              }
            },
            {
              "id": "organize",
              "options": {
                "excludeByName": {},
                "includeByName": {},
                "indexByName": {},
                "renameByName": {
                  "Block making (p10)": "10th percentile",
                  "Block making (p50)": "50th percentile",
                  "Block making (p90)": "90th percentile",
                  "Block making (p99)": "99th percentile",
                  "mercury (p50)": "50th percentile",
                  "mercury (p90)": "90th percentile",
                  "mercury (p99)": "99th percentile"
                }
              }
            },
            {
              "id": "calculateField",
              "options": {
                "binary": {
                  "left": {
                    "matcher": {
                      "id": "byName",
                      "options": "90th percentile"
                    }
                  },
                  "operator": "-",
                  "right": {
                    "matcher": {
                      "id": "byName",
                      "options": "50th percentile"
                    }
                  }
                },
                "mode": "binary",
                "reduce": {
                  "reducer": "sum"
                }
              }
            },
            {
              "id": "calculateField",
              "options": {
                "alias": "",
                "binary": {
                  "left": {
                    "matcher": {
                      "id": "byName",
                      "options": "99th percentile"
                    }
                  },
                  "operator": "-",
                  "right": {
                    "matcher": {
                      "id": "byName",
                      "options": "90th percentile"
                    }
                  }
                },
                "mode": "binary",
                "reduce": {
                  "reducer": "sum"
                }
              }
            },
            {
              "id": "organize",
              "options": {
                "excludeByName": {
                  "90th percentile": false,
                  "99th percentile": false
                },
                "includeByName": {},
                "indexByName": {},
                "renameByName": {
                  "90th percentile - 50th percentile": "Delta to 90th percentile",
                  "99th percentile - 90th percentile": "Delta to 99th percentile",
                  "ic_subnet": "Subnet"
                }
              }
            }
          ],
          "transparent": true,
          "type": "barchart"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "description": "Distribution of disk read latencies over the selected time range.\n\nFirst, the disk read latency is averaged over **$period**, with **$__interval** resolution. Out of these samples, the 50th (\"average\"), 90th (\"high\") and 99th (\"peak\") read latencies are displayed.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "fillOpacity": 60,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineWidth": 0,
                "scaleDistribution": {
                  "type": "linear"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": []
              },
              "unit": "s"
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byName",
                  "options": "50th percentile"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "dark-blue",
                      "mode": "fixed"
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Delta to 90th percentile"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "blue",
                      "mode": "fixed"
                    }
                  },
                  {
                    "id": "custom.hideFrom",
                    "value": {
                      "legend": false,
                      "tooltip": true,
                      "viz": false
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Delta to 99th percentile"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "super-light-blue",
                      "mode": "fixed"
                    }
                  },
                  {
                    "id": "custom.hideFrom",
                    "value": {
                      "legend": false,
                      "tooltip": true,
                      "viz": false
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "90th percentile"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "blue",
                      "mode": "fixed"
                    }
                  },
                  {
                    "id": "custom.hideFrom",
                    "value": {
                      "legend": false,
                      "tooltip": false,
                      "viz": true
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "99th percentile"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "super-light-blue",
                      "mode": "fixed"
                    }
                  },
                  {
                    "id": "custom.hideFrom",
                    "value": {
                      "legend": false,
                      "tooltip": false,
                      "viz": true
                    }
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 16,
            "w": 12,
            "x": 0,
            "y": 66
          },
          "id": 61,
          "options": {
            "barRadius": 0,
            "barWidth": 0.9,
            "fullHighlight": false,
            "groupWidth": 0.7,
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "orientation": "horizontal",
            "showValue": "never",
            "stacking": "normal",
            "tooltip": {
              "mode": "multi",
              "sort": "none"
            },
            "xTickLabelRotation": 0,
            "xTickLabelSpacing": 0
          },
          "pluginVersion": "11.3.0",
          "targets": [
            {
              "editorMode": "code",
              "exemplar": false,
              "expr": "label_replace(\n    quantile by(ic, ic_subnet) (\n        0.5,\n            rate(node_disk_read_time_seconds_total{job=~\"node_exporter.*\",ic=\"$ic\",ic_subnet=~\"$ic_subnet\",device=\"vda\"}[$period])\n        /\n            rate(node_disk_reads_completed_total{job=~\"node_exporter.*\",ic=\"$ic\",ic_subnet=~\"$ic_subnet\",device=\"vda\"}[$period])\n   ),\n    \"ic_subnet\", \"$1\", \"ic_subnet\", \"([a-z0-9]+)-.*\"\n)",
              "hide": false,
              "instant": false,
              "interval": "",
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Disk Read Latency, Percentiles",
          "transformations": [
            {
              "id": "prepareTimeSeries",
              "options": {
                "format": "multi"
              }
            },
            {
              "id": "joinByLabels",
              "options": {
                "join": [
                  "ic_subnet"
                ],
                "value": "ic"
              }
            },
            {
              "id": "groupBy",
              "options": {
                "fields": {
                  "Block making": {
                    "aggregations": [
                      "p50",
                      "p90",
                      "p99"
                    ],
                    "operation": "aggregate"
                  },
                  "ic_subnet": {
                    "aggregations": [],
                    "operation": "groupby"
                  },
                  "mercury": {
                    "aggregations": [
                      "p50",
                      "p90",
                      "p99"
                    ],
                    "operation": "aggregate"
                  }
                }
              }
            },
            {
              "id": "sortBy",
              "options": {
                "fields": {},
                "sort": [
                  {
                    "desc": true,
                    "field": "mercury (p50)"
                  }
                ]
              }
            },
            {
              "id": "filterFieldsByName",
              "options": {
                "include": {
                  "names": [
                    "ic_subnet",
                    "mercury (p50)",
                    "mercury (p90)",
                    "mercury (p99)"
                  ]
                }
              }
            },
            {
              "id": "organize",
              "options": {
                "excludeByName": {},
                "includeByName": {},
                "indexByName": {},
                "renameByName": {
                  "Block making (p10)": "10th percentile",
                  "Block making (p50)": "50th percentile",
                  "Block making (p90)": "90th percentile",
                  "Block making (p99)": "99th percentile",
                  "mercury (p50)": "50th percentile",
                  "mercury (p90)": "90th percentile",
                  "mercury (p99)": "99th percentile"
                }
              }
            },
            {
              "id": "calculateField",
              "options": {
                "binary": {
                  "left": {
                    "matcher": {
                      "id": "byName",
                      "options": "90th percentile"
                    }
                  },
                  "operator": "-",
                  "right": {
                    "matcher": {
                      "id": "byName",
                      "options": "50th percentile"
                    }
                  }
                },
                "mode": "binary",
                "reduce": {
                  "reducer": "sum"
                }
              }
            },
            {
              "id": "calculateField",
              "options": {
                "alias": "",
                "binary": {
                  "left": {
                    "matcher": {
                      "id": "byName",
                      "options": "99th percentile"
                    }
                  },
                  "operator": "-",
                  "right": {
                    "matcher": {
                      "id": "byName",
                      "options": "90th percentile"
                    }
                  }
                },
                "mode": "binary",
                "reduce": {
                  "reducer": "sum"
                }
              }
            },
            {
              "id": "organize",
              "options": {
                "excludeByName": {
                  "90th percentile": false,
                  "99th percentile": false
                },
                "includeByName": {},
                "indexByName": {},
                "renameByName": {
                  "90th percentile - 50th percentile": "Delta to 90th percentile",
                  "99th percentile - 90th percentile": "Delta to 99th percentile",
                  "ic_subnet": "Subnet"
                }
              }
            }
          ],
          "transparent": true,
          "type": "barchart"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "description": "Distribution of disk written bytes over the selected time range.\n\nFirst, the disk write latency is averaged over **$period**, with **$__interval** resolution. Out of these samples, the 50th (\"average\"), 90th (\"high\") and 99th (\"peak\") write latencies are displayed.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "fillOpacity": 60,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineWidth": 0,
                "scaleDistribution": {
                  "type": "linear"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": []
              },
              "unit": "binBps"
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byName",
                  "options": "50th percentile"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "dark-blue",
                      "mode": "fixed"
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Delta to 90th percentile"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "blue",
                      "mode": "fixed"
                    }
                  },
                  {
                    "id": "custom.hideFrom",
                    "value": {
                      "legend": false,
                      "tooltip": true,
                      "viz": false
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Delta to 99th percentile"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "super-light-blue",
                      "mode": "fixed"
                    }
                  },
                  {
                    "id": "custom.hideFrom",
                    "value": {
                      "legend": false,
                      "tooltip": true,
                      "viz": false
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "90th percentile"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "blue",
                      "mode": "fixed"
                    }
                  },
                  {
                    "id": "custom.hideFrom",
                    "value": {
                      "legend": false,
                      "tooltip": false,
                      "viz": true
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "99th percentile"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "super-light-blue",
                      "mode": "fixed"
                    }
                  },
                  {
                    "id": "custom.hideFrom",
                    "value": {
                      "legend": false,
                      "tooltip": false,
                      "viz": true
                    }
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 16,
            "w": 12,
            "x": 12,
            "y": 66
          },
          "id": 66,
          "options": {
            "barRadius": 0,
            "barWidth": 0.9,
            "fullHighlight": false,
            "groupWidth": 0.7,
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "orientation": "horizontal",
            "showValue": "never",
            "stacking": "normal",
            "tooltip": {
              "mode": "multi",
              "sort": "none"
            },
            "xTickLabelRotation": 0,
            "xTickLabelSpacing": 0
          },
          "pluginVersion": "11.3.0",
          "targets": [
            {
              "editorMode": "code",
              "exemplar": false,
              "expr": "label_replace(\n    quantile by(ic, ic_subnet) (\n        0.5,\n        rate(node_disk_written_bytes_total{job=~\"node_exporter.*\",ic=\"$ic\",ic_subnet=~\"$ic_subnet\",device=\"vda\"}[$period])\n   ),\n    \"ic_subnet\", \"$1\", \"ic_subnet\", \"([a-z0-9]+)-.*\"\n)",
              "hide": false,
              "instant": false,
              "interval": "",
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Disk Write Bytes, Percentiles",
          "transformations": [
            {
              "id": "prepareTimeSeries",
              "options": {
                "format": "multi"
              }
            },
            {
              "id": "joinByLabels",
              "options": {
                "join": [
                  "ic_subnet"
                ],
                "value": "ic"
              }
            },
            {
              "id": "groupBy",
              "options": {
                "fields": {
                  "Block making": {
                    "aggregations": [
                      "p50",
                      "p90",
                      "p99"
                    ],
                    "operation": "aggregate"
                  },
                  "ic_subnet": {
                    "aggregations": [],
                    "operation": "groupby"
                  },
                  "mercury": {
                    "aggregations": [
                      "p50",
                      "p90",
                      "p99"
                    ],
                    "operation": "aggregate"
                  }
                }
              }
            },
            {
              "id": "sortBy",
              "options": {
                "fields": {},
                "sort": [
                  {
                    "desc": true,
                    "field": "mercury (p50)"
                  }
                ]
              }
            },
            {
              "id": "filterFieldsByName",
              "options": {
                "include": {
                  "names": [
                    "ic_subnet",
                    "mercury (p50)",
                    "mercury (p90)",
                    "mercury (p99)"
                  ]
                }
              }
            },
            {
              "id": "organize",
              "options": {
                "excludeByName": {},
                "includeByName": {},
                "indexByName": {},
                "renameByName": {
                  "Block making (p10)": "10th percentile",
                  "Block making (p50)": "50th percentile",
                  "Block making (p90)": "90th percentile",
                  "Block making (p99)": "99th percentile",
                  "mercury (p50)": "50th percentile",
                  "mercury (p90)": "90th percentile",
                  "mercury (p99)": "99th percentile"
                }
              }
            },
            {
              "id": "calculateField",
              "options": {
                "binary": {
                  "left": {
                    "matcher": {
                      "id": "byName",
                      "options": "90th percentile"
                    }
                  },
                  "operator": "-",
                  "right": {
                    "matcher": {
                      "id": "byName",
                      "options": "50th percentile"
                    }
                  }
                },
                "mode": "binary",
                "reduce": {
                  "reducer": "sum"
                }
              }
            },
            {
              "id": "calculateField",
              "options": {
                "alias": "",
                "binary": {
                  "left": {
                    "matcher": {
                      "id": "byName",
                      "options": "99th percentile"
                    }
                  },
                  "operator": "-",
                  "right": {
                    "matcher": {
                      "id": "byName",
                      "options": "90th percentile"
                    }
                  }
                },
                "mode": "binary",
                "reduce": {
                  "reducer": "sum"
                }
              }
            },
            {
              "id": "organize",
              "options": {
                "excludeByName": {
                  "90th percentile": false,
                  "99th percentile": false
                },
                "includeByName": {},
                "indexByName": {},
                "renameByName": {
                  "90th percentile - 50th percentile": "Delta to 90th percentile",
                  "99th percentile - 90th percentile": "Delta to 99th percentile",
                  "ic_subnet": "Subnet"
                }
              }
            }
          ],
          "transparent": true,
          "type": "barchart"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "description": "Distribution of DSM execution thread duration over the selected time range.\n\nThe 50th (average thread), 90th (busy thread) and 99th (very busy thread) DSM thread duration over the selected time range.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "fillOpacity": 60,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineWidth": 0,
                "scaleDistribution": {
                  "type": "linear"
                },
                "thresholdsStyle": {
                  "mode": "area"
                }
              },
              "mappings": [],
              "max": 577243604582,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "transparent"
                  },
                  {
                    "color": "red",
                    "value": 549755813888
                  }
                ]
              },
              "unit": "bytes"
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byName",
                  "options": "30th percentile"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "dark-blue",
                      "mode": "fixed"
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Delta to 50th percentile"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "blue",
                      "mode": "fixed"
                    }
                  },
                  {
                    "id": "custom.hideFrom",
                    "value": {
                      "legend": false,
                      "tooltip": true,
                      "viz": false
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Delta to 70th percentile"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "super-light-blue",
                      "mode": "fixed"
                    }
                  },
                  {
                    "id": "custom.hideFrom",
                    "value": {
                      "legend": false,
                      "tooltip": true,
                      "viz": false
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "50th percentile"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "blue",
                      "mode": "fixed"
                    }
                  },
                  {
                    "id": "custom.hideFrom",
                    "value": {
                      "legend": false,
                      "tooltip": false,
                      "viz": true
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "70th percentile"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "super-light-blue",
                      "mode": "fixed"
                    }
                  },
                  {
                    "id": "custom.hideFrom",
                    "value": {
                      "legend": false,
                      "tooltip": false,
                      "viz": true
                    }
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 16,
            "w": 12,
            "x": 0,
            "y": 82
          },
          "id": 63,
          "options": {
            "barRadius": 0,
            "barWidth": 0.9,
            "fullHighlight": false,
            "groupWidth": 0.7,
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "orientation": "horizontal",
            "showValue": "never",
            "stacking": "normal",
            "tooltip": {
              "mode": "multi",
              "sort": "none"
            },
            "xTickLabelRotation": 0,
            "xTickLabelSpacing": 0
          },
          "pluginVersion": "11.3.0",
          "targets": [
            {
              "editorMode": "code",
              "exemplar": false,
              "expr": "label_replace(\nlabel_replace(\n    quantile by(le, ic_subnet) (\n        .3,\n            node_memory_MemTotal_bytes{job=\"node_exporter\",ic=\"$ic\",ic_subnet=~\"$ic_subnet\"}\n        -\n            node_memory_MemFree_bytes{job=\"node_exporter\",ic=\"$ic\",ic_subnet=~\"$ic_subnet\"}\n        -\n            node_memory_Cached_bytes{job=\"node_exporter\",ic=\"$ic\",ic_subnet=~\"$ic_subnet\"}\n        -\n            node_memory_Buffers_bytes{job=\"node_exporter\",ic=\"$ic\",ic_subnet=~\"$ic_subnet\"}\n        -\n            node_memory_SReclaimable_bytes{job=\"node_exporter\",ic=\"$ic\",ic_subnet=~\"$ic_subnet\"}\n    ),\n    \"ic_subnet\", \"$1\", \"ic_subnet\", \"([a-z0-9]+)-.*\"),\n    \"percentile\", \"30th percentile\", \"ic_subnet\", \".*\"\n)",
              "format": "heatmap",
              "hide": false,
              "instant": true,
              "interval": "",
              "legendFormat": "__auto",
              "range": false,
              "refId": "A"
            },
            {
              "editorMode": "code",
              "exemplar": false,
              "expr": "label_replace(\nlabel_replace(\n    quantile by(le, ic_subnet) (\n        .5,\n            node_memory_MemTotal_bytes{job=\"node_exporter\",ic=\"$ic\",ic_subnet=~\"$ic_subnet\"}\n        -\n            node_memory_MemFree_bytes{job=\"node_exporter\",ic=\"$ic\",ic_subnet=~\"$ic_subnet\"}\n        -\n            node_memory_Cached_bytes{job=\"node_exporter\",ic=\"$ic\",ic_subnet=~\"$ic_subnet\"}\n        -\n            node_memory_Buffers_bytes{job=\"node_exporter\",ic=\"$ic\",ic_subnet=~\"$ic_subnet\"}\n        -\n            node_memory_SReclaimable_bytes{job=\"node_exporter\",ic=\"$ic\",ic_subnet=~\"$ic_subnet\"}\n    ),\n    \"ic_subnet\", \"$1\", \"ic_subnet\", \"([a-z0-9]+)-.*\"),\n    \"percentile\", \"50th percentile\", \"ic_subnet\", \".*\"\n)",
              "format": "heatmap",
              "hide": false,
              "instant": true,
              "interval": "",
              "legendFormat": "__auto",
              "range": false,
              "refId": "B"
            },
            {
              "editorMode": "code",
              "exemplar": false,
              "expr": "label_replace(\nlabel_replace(\n    quantile by(le, ic_subnet) (\n        .7,\n            node_memory_MemTotal_bytes{job=\"node_exporter\",ic=\"$ic\",ic_subnet=~\"$ic_subnet\"}\n        -\n            node_memory_MemFree_bytes{job=\"node_exporter\",ic=\"$ic\",ic_subnet=~\"$ic_subnet\"}\n        -\n            node_memory_Cached_bytes{job=\"node_exporter\",ic=\"$ic\",ic_subnet=~\"$ic_subnet\"}\n        -\n            node_memory_Buffers_bytes{job=\"node_exporter\",ic=\"$ic\",ic_subnet=~\"$ic_subnet\"}\n        -\n            node_memory_SReclaimable_bytes{job=\"node_exporter\",ic=\"$ic\",ic_subnet=~\"$ic_subnet\"}\n    ),\n    \"ic_subnet\", \"$1\", \"ic_subnet\", \"([a-z0-9]+)-.*\"),\n    \"percentile\", \"70th percentile\", \"ic_subnet\", \".*\"\n)",
              "format": "heatmap",
              "hide": false,
              "instant": true,
              "interval": "",
              "legendFormat": "__auto",
              "range": false,
              "refId": "C"
            }
          ],
          "title": "RAM Usage, Percentiles",
          "transformations": [
            {
              "id": "joinByLabels",
              "options": {
                "join": [
                  "ic_subnet"
                ],
                "value": "percentile"
              }
            },
            {
              "id": "sortBy",
              "options": {
                "fields": {},
                "sort": [
                  {
                    "desc": true,
                    "field": "70th percentile"
                  }
                ]
              }
            },
            {
              "id": "calculateField",
              "options": {
                "alias": "Delta to 50th percentile",
                "binary": {
                  "left": {
                    "matcher": {
                      "id": "byName",
                      "options": "50th percentile"
                    }
                  },
                  "operator": "-",
                  "right": {
                    "matcher": {
                      "id": "byName",
                      "options": "30th percentile"
                    }
                  }
                },
                "mode": "binary",
                "reduce": {
                  "reducer": "sum"
                }
              }
            },
            {
              "id": "calculateField",
              "options": {
                "alias": "Delta to 70th percentile",
                "binary": {
                  "left": {
                    "matcher": {
                      "id": "byName",
                      "options": "70th percentile"
                    }
                  },
                  "operator": "-",
                  "right": {
                    "matcher": {
                      "id": "byName",
                      "options": "50th percentile"
                    }
                  }
                },
                "mode": "binary",
                "reduce": {
                  "reducer": "sum"
                }
              }
            }
          ],
          "transparent": true,
          "type": "barchart"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${datasource}"
          },
          "description": "Distribution of disk write operations over the selected time range.\n\nFirst, the disk write latency is averaged over **$period**, with **$__interval** resolution. Out of these samples, the 50th (\"average\"), 90th (\"high\") and 99th (\"peak\") write latencies are displayed.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "fillOpacity": 60,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineWidth": 0,
                "scaleDistribution": {
                  "type": "linear"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": []
              },
              "unit": "binBps"
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byName",
                  "options": "50th percentile"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "dark-blue",
                      "mode": "fixed"
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Delta to 90th percentile"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "blue",
                      "mode": "fixed"
                    }
                  },
                  {
                    "id": "custom.hideFrom",
                    "value": {
                      "legend": false,
                      "tooltip": true,
                      "viz": false
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Delta to 99th percentile"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "super-light-blue",
                      "mode": "fixed"
                    }
                  },
                  {
                    "id": "custom.hideFrom",
                    "value": {
                      "legend": false,
                      "tooltip": true,
                      "viz": false
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "90th percentile"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "blue",
                      "mode": "fixed"
                    }
                  },
                  {
                    "id": "custom.hideFrom",
                    "value": {
                      "legend": false,
                      "tooltip": false,
                      "viz": true
                    }
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "99th percentile"
                },
                "properties": [
                  {
                    "id": "color",
                    "value": {
                      "fixedColor": "super-light-blue",
                      "mode": "fixed"
                    }
                  },
                  {
                    "id": "custom.hideFrom",
                    "value": {
                      "legend": false,
                      "tooltip": false,
                      "viz": true
                    }
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 16,
            "w": 12,
            "x": 12,
            "y": 82
          },
          "id": 67,
          "options": {
            "barRadius": 0,
            "barWidth": 0.9,
            "fullHighlight": false,
            "groupWidth": 0.7,
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "orientation": "horizontal",
            "showValue": "never",
            "stacking": "normal",
            "tooltip": {
              "mode": "multi",
              "sort": "none"
            },
            "xTickLabelRotation": 0,
            "xTickLabelSpacing": 0
          },
          "pluginVersion": "11.3.0",
          "targets": [
            {
              "editorMode": "code",
              "exemplar": false,
              "expr": "label_replace(\n    quantile by(ic, ic_subnet) (\n        0.5,\n        rate(node_disk_writes_completed_total{job=~\"node_exporter.*\",ic=\"$ic\",ic_subnet=~\"$ic_subnet\",device=\"vda\"}[$period])\n   ),\n    \"ic_subnet\", \"$1\", \"ic_subnet\", \"([a-z0-9]+)-.*\"\n)",
              "hide": false,
              "instant": false,
              "interval": "",
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Disk Write Operations, Percentiles",
          "transformations": [
            {
              "id": "prepareTimeSeries",
              "options": {
                "format": "multi"
              }
            },
            {
              "id": "joinByLabels",
              "options": {
                "join": [
                  "ic_subnet"
                ],
                "value": "ic"
              }
            },
            {
              "id": "groupBy",
              "options": {
                "fields": {
                  "Block making": {
                    "aggregations": [
                      "p50",
                      "p90",
                      "p99"
                    ],
                    "operation": "aggregate"
                  },
                  "ic_subnet": {
                    "aggregations": [],
                    "operation": "groupby"
                  },
                  "mercury": {
                    "aggregations": [
                      "p50",
                      "p90",
                      "p99"
                    ],
                    "operation": "aggregate"
                  }
                }
              }
            },
            {
              "id": "sortBy",
              "options": {
                "fields": {},
                "sort": [
                  {
                    "desc": true,
                    "field": "mercury (p50)"
                  }
                ]
              }
            },
            {
              "id": "organize",
              "options": {
                "excludeByName": {},
                "includeByName": {},
                "indexByName": {},
                "renameByName": {
                  "Block making (p10)": "10th percentile",
                  "Block making (p50)": "50th percentile",
                  "Block making (p90)": "90th percentile",
                  "Block making (p99)": "99th percentile",
                  "mercury (p50)": "50th percentile",
                  "mercury (p90)": "90th percentile",
                  "mercury (p99)": "99th percentile"
                }
              }
            },
            {
              "id": "calculateField",
              "options": {
                "binary": {
                  "left": {
                    "matcher": {
                      "id": "byName",
                      "options": "90th percentile"
                    }
                  },
                  "operator": "-",
                  "right": {
                    "matcher": {
                      "id": "byName",
                      "options": "50th percentile"
                    }
                  }
                },
                "mode": "binary",
                "reduce": {
                  "reducer": "sum"
                }
              }
            },
            {
              "id": "calculateField",
              "options": {
                "alias": "",
                "binary": {
                  "left": {
                    "matcher": {
                      "id": "byName",
                      "options": "99th percentile"
                    }
                  },
                  "operator": "-",
                  "right": {
                    "matcher": {
                      "id": "byName",
                      "options": "90th percentile"
                    }
                  }
                },
                "mode": "binary",
                "reduce": {
                  "reducer": "sum"
                }
              }
            },
            {
              "id": "organize",
              "options": {
                "excludeByName": {
                  "90th percentile": false,
                  "99th percentile": false
                },
                "includeByName": {},
                "indexByName": {},
                "renameByName": {
                  "90th percentile - 50th percentile": "Delta to 90th percentile",
                  "99th percentile - 90th percentile": "Delta to 99th percentile",
                  "ic_subnet": "Subnet"
                }
              }
            }
          ],
          "transparent": true,
          "type": "barchart"
        }
      ],
      "title": "Node",
      "type": "row"
    }
  ],
  "preload": false,
  "refresh": "",
  "schemaVersion": 40,
  "tags": [
    "production"
  ],
  "templating": {
    "list": [
      {
        "current": {
          "selected": false,
          "text": "IC Metrics (cluster local)",
          "value": "IC Metrics (cluster local)"
        },
        "hide": 0,
        "includeAll": false,
        "multi": false,
        "name": "datasource",
        "options": [],
        "query": "prometheus",
        "refresh": 1,
        "regex": "/IC.*/",
        "skipUrlSync": false,
        "type": "datasource"
      },
      {
        "current": {
          "text": "mercury",
          "value": "mercury"
        },
        "datasource": {
          "type": "prometheus",
          "uid": "${datasource}"
        },
        "definition": "label_values(up{job=\"replica\"}, ic)",
        "includeAll": false,
        "label": "IC",
        "name": "ic",
        "options": [],
        "query": {
          "query": "label_values(up{job=\"replica\"}, ic)",
          "refId": "prometheus-ic-Variable-Query"
        },
        "refresh": 2,
        "regex": "",
        "sort": 1,
        "type": "query"
      },
      {
        "allValue": ".+",
        "current": {
          "text": [
            "All"
          ],
          "value": [
            "$__all"
          ]
        },
        "datasource": {
          "type": "prometheus",
          "uid": "${datasource}"
        },
        "definition": "label_values(up{job=\"replica\",ic=\"$ic\"}, ic_subnet)",
        "includeAll": true,
        "label": "Subnet",
        "multi": true,
        "name": "ic_subnet",
        "options": [],
        "query": {
          "query": "label_values(up{job=\"replica\",ic=\"$ic\"}, ic_subnet)",
          "refId": "prometheus-ic_subnet-Variable-Query"
        },
        "refresh": 2,
        "regex": "",
        "sort": 1,
        "type": "query"
      },
      {
        "auto": true,
        "auto_count": 200,
        "auto_min": "20s",
        "current": {
          "selected": false,
          "text": "auto",
          "value": "$__auto_interval_period"
        },
        "label": "Aggregation period",
        "name": "period",
        "options": [
          {
            "selected": false,
            "text": "20s",
            "value": "20s"
          },
          {
            "selected": false,
            "text": "30s",
            "value": "30s"
          },
          {
            "selected": false,
            "text": "1m",
            "value": "1m"
          },
          {
            "selected": false,
            "text": "2m",
            "value": "2m"
          },
          {
            "selected": false,
            "text": "5m",
            "value": "5m"
          },
          {
            "selected": false,
            "text": "10m",
            "value": "10m"
          },
          {
            "selected": false,
            "text": "30m",
            "value": "30m"
          },
          {
            "selected": false,
            "text": "1h",
            "value": "1h"
          }
        ],
        "query": "20s,30s,1m,2m,5m,10m,30m,1h",
        "refresh": 2,
        "type": "interval"
      }
    ]
  },
  "time": {
    "from": "now-1h",
    "to": "now"
  },
  "timepicker": {},
  "timezone": "utc",
  "title": "Subnet Load",
  "uid": "subnet-load",
  "version": 4,
  "weekStart": ""
}
