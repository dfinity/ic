# Use libsystemd from the host environment

load("@rules_cc//cc:cc_import.bzl", "cc_import")
load("@rules_cc//cc:cc_library.bzl", "cc_library")

cc_import(
    name = "libsystemd-internal",
    hdrs = glob(["include/systemd/*.h"]),
    interface_library = "lib/x86_64-linux-gnu/libsystemd.so",
    system_provided = True,
    visibility = ["//visibility:private"],
)

# Use an extra cc_library to hide the depth of the include folder
cc_library(
    name = "libsystemd",
    includes = ["include"],
    visibility = ["//visibility:public"],
    deps = ["libsystemd-internal"],
)
