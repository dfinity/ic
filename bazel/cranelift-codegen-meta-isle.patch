# Patch for issue: https://github.com/bytecodealliance/wasmtime/pull/10334
diff --git a/cranelift/codegen/meta/src/isle.rs b/cranelift/codegen/meta/src/isle.rs
index 844e45230..dcd23c3c4 100644
--- a/cranelift/codegen/meta/src/isle.rs
+++ b/cranelift/codegen/meta/src/isle.rs
@@ -82,11 +82,11 @@ pub fn get_isle_compilations(
         .join("pulley_shared");
 
     // Assembler definitions.
-    let asm_isle_definitions = cranelift_assembler_x64::generated_files()
-        .into_iter()
-        .filter(|p| p.extension() == Some(std::ffi::OsStr::new("isle")))
-        .next()
-        .unwrap();
+    let asm_isle_contents = cranelift_assembler_x64::assembler_definitions_isle_contents();
+    let asm_isle_definitions = gen_dir.join("assembler-definitions.isle");
+    std::fs::write(&asm_isle_definitions, asm_isle_contents).expect(&format!(
+        "Unable to write isle generated by `cranelift-assembler-x64` to {asm_isle_definitions:?}"
+    ));
 
     // This is a set of ISLE compilation units.
     //
